---
layout: post
title:  "openvpn-route"
date:   2017-08-07 17:16:28 +0300
categories: vpn
tags: vpn
---

# openvpn-route
Прежде всего, веб-конфигуратор для OpenVPN более чем скромен- нет и половины функций. Но конфиги, сгенерированные им править можно (и нужно. если не хватает встроенных функций).
По Вашей ситуации- прежде всего в конфиг сервера нужно добавить строчки
Код: [Выделить]

push "route 192.168.8.0/24"

  -говорим клиетам добавить себе маршрут к подсети 192.168.8.0/24 через туннель
Код: [Выделить]

route 192.168.5.0/24

- говорим локальной машине прописать при поднятом туннеле маршрут к сети 192.168.5.0/24 через туннель

и создать в папке /var/lib/openvpn/etc/openvpn/ccd файл с именем клиента (в Вашем случае это скорее всего а5)
и вписать в него
Код: [Выделить]

iroute 192.168.5.0/24

-так Вы объясните OpenVPN через какого именно клиента доступна сеть 192.168.5.0/24.
ВНИМАНИЕ! После этого вносить изменения через альтератор уже нельзя-иначе он перепишет конфиг под себя. А лучше передоверить управление туннелями etcnet.
Перезапустите OpenVPN и посмотрите маршрутизацию  -
Код: [Выделить]

ip route

.
Если все правильно- там будут маршруты через туннели.

А вообще, очень рекомендую раскурить [http://www.lissyara.su/articles/freebsd/security/openvpn+pkcs-12/.](http://www.lissyara.su/articles/freebsd/security/openvpn+pkcs-12/.) Все разжевано ну просто дальше некуда. Единственная специфика АЛЬТа - клиентские конфиги (ccd) из-за chroot находятся не в /etc/openvpn/ccd, а в /var/lib/openvpn/etc/openvpn/ccd.
