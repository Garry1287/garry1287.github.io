---
layout: post
title:  "Stub в DNS для связывания"
date:   2013-02-17 06:21:12 +0400
categories: dns
tags: dns
---

# Stub в DNS для связывания.

Рекурсивные сервер должен быть только для запросов из локальной сети (нашей)
Для запросов из вне он должен быть нерекурсивным
Безопасность - завалят запросами из вне


* итеративные запросы (клиент посылает серверу DNS запрос, в котором требует дать наилучший ответ без обращений к другим DNS-серверам);
* рекурсивные запросы (клиент посылает серверу DNS запрос, в котором требует дать окончательный ответ даже если DNS-серверу придется отправить запросы другим DNS-серверам; посылаемые в этом случае другим DNS-серверам запросы будут итеративными).
Обычные DNS-клиенты (например, рабочие станции пользователей), как правило, посылают рекурсивные запросы.

Если клиент отправил серверу рекурсивный запрос, то он ожидает от него и ответ. DNS сервер сам опрашивает (итеративно обычно, так как коренвые не работают рекурсивно) другие сервера и получает ответ, который переправляет клиенту. dns resolver обычно называют такой сервер. (клиент ставит специальный флаг в запросе)

При отправки итеративного запроса, сервер даёт наилучший ответ (если есть в кеше, то сразу), либо отправляет выше. Клиент сам дальше опрашивает итеративно dns серверы и получает окончательный ответ.

Для своих локальных, обслуживаемых сетей мы работает как dns resolver, для мира отвечаем итеративно.

[https://studopedia.ru/4_164394_algoritmi-raboti-iterativnih-i-rekursivnih-zaprosov-DNS.html](https://studopedia.ru/4_164394_algoritmi-raboti-iterativnih-i-rekursivnih-zaprosov-DNS.html)

## Для  связывания зон необходимо использовать stub зоны
stub зона по сути slave зона, но содержащая только NS записи
stub зона должа быть одинаково сконфигурирована и на главном и подчинёном сервере родительской зоны

На родительском делаем stub зону, которая содержить информацию о NS серверах дочерней.
На дочернем сервере банально делаем зону и прописываем свои NS и их ip

Родительский стаскивает из master зоны на дочернем только NS и их ip (ip только для своего домена)

