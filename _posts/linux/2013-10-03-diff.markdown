---
layout: post
title:  "diff"
date:   2013-10-03 22:20:25 +0400
categories: linux
tags: linux
---

# diff
Опция --u: Унифицированный формат
-U число_строк --unified=число_строк

Унифицированный формат по умолчанию не выводит строк контекста:

$ diff -u cot.txt cot2.txt
--- cot.txt     2009-02-16 22:50:36.000000000 +0300
+++ cot2.txt    2009-02-16 22:50:44.000000000 +0300
@@ -1,8 +1,8 @@
-кот
 собака
 ящерица
 белка
-зубр
+бизон
 попугай
 рыба
 змея
+крыса

Присмотревшись и вдумавшись, можно понять следующее:

1. В заголовке сказано, что минусами помечены строки из первого файла, а плюсами - из второго.

2. Формат даты такой же, как у контекстного формата.

3. Диапазоны строк указаны для обоих файлов и отмечены знаками двойной "собаки".

4. Слова, общие для двух файлов ничем не отмечены (или, если хотите, отмечены пробелом).

5. Знаком минус помечены строки, которые есть только в первом файле, как бы изъятые из первого файла, если считать его эталонным.

6. Знаком плюс помечены строки, которых нет в первом файле, как бы добавленные к нему.

Не знаю как вам, но мне этот формат кажется наиболее понятным.

Используя опцию -U число_строк (--unified=число_строк), можно просматривать нужное число строк контекста. Я этого делать не стану, так как мои примерные файлы слишком короткие для этого. Проделайте этот опыт самостоятельно с файлами подлиннее. 


@@ -l,s +l,s @@ optional section heading

Информация о диапазоне состоит из двух частей. Часть для оригинального файла начинается с минуса, а часть для нового файла начинается с плюса. Каждая часть в формате l, s, где l — номер строки, с которой начинаем, а s — количество строк, которые были изменены в текущем фрагменте для каждого из файлов, соответственно (то есть, в первом случае, это сумма выведенных строк, начинающихся с пробела и с минуса, во втором — строк, начинающихся с пробела и с плюса).

[http://4debian.info/wiki/f/diff/](http://4debian.info/wiki/f/diff/)
[https://ru.wikipedia.org/wiki/Diff](https://ru.wikipedia.org/wiki/Diff)
