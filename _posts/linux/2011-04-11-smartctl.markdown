---
layout: post
title:  "smartctl"
date:   2011-04-11 12:20:40 +0400
categories: linux
tags: linux
---

# smartctl
если у диска все хорошо, то риаллокейты у него не появятся даже через год другой, а вот если у диска проблемы (это может быть электроника, ошибки в прошивке, некачественные блины, в конечном счете это все не важно, где у диска проблемы), то риаллокейт - это как первый маркер, и если есть возможность, то диски лучше поменять, если не хотите потом решать куда большие проблемы


 Температурное окно для работы надо смотреть в тех характеристиках на сайте производителя винтов. Если выходит за рамки - пишите в ДЦ / саппорт

2. Как говорили, нужно смотреть на интенсивность роста Reallocated_Sector_Ct и отличное от нуля и Reported_Uncorrect

3. В смарте есть три колонки VALUE WORST THRESH . VALUE - это текущий показатель . WORST - это наихудший зарегистрированный за все время работы диска. THRESH - это порог, ниже которого смерть винта может наступить в течение суток. Если Ваш нынешний или минимальный показатель ниже THRESH или равен ему - однозначная замена.

4. В smartmontools можно настроить отправку отчетов на почту в случае проблем - очень поможет. Также советую регулярно делать шорт и лонг тесты и смотреть dmesg на наличиие ошибок от ata1 , ata2

На время работы винта может не смотреть вообще, так как некоторое винты работают нормально месяцами и годами, а некоторые начинают сыпаться после первого запуска. Согласно проведенным Google исследованиям - шанс выхода из строя диска в первые 3 месяца выше, чем в среднем в дальнейшей эксплуатации.


как только хотя бы одна единица будет тут: Reallocated_Sector_Ct - диск можно сразу менять, вне зависимости от остальных параметров. если остальные параметры так же показывают капец, то диск нужно менять незамедлительно.
Reallocated_Sector_Ct - смотреть сюда в основном
Не всегда актуально, у меня бывают ситуации когда сбоит шлейф например, может даже Pending показать парочку, меняем шлейф, ребутимся соответственно, long\short - все в порядке, по нулям.


smartctl -t long
а где результаты глянуть
Цитата:
smartctl -t long /dev/sda
smartctl -X /dev/sda 


Spin_Up_Time у вас в порядке, стало быть электронику можно считать рабочей
Reallocated_Sector_Ct - выглядит очень печально, особенно на первом винте, при этом отсутствуют Pending сектора, но все равно я бы рекомендовал незамедлительно менять оба винчестера, хотя писавшие ранее, предложили short,long тесты.... можно попробовать проверить и таким способом конечно, но надо быть готовым к замене "прямо сейчас".... Главное что бы показатели Reallocated_Sector_Ct не росли.... так как SMART это все таки не совсем отображение действительности (У меня есть винты у которых ГОДЫ этот показатель на одном месте но в количестве около 20.000 ) но он не двигался за год ни разу... стало быть термин "сыпется винт" отпадает.... если же количество растет .... 300% меняйте винты.

Airflow_Temperature_Cel - выглядит странновато , хотя я не знаю интенсивности работы ваших винтов... могут конечно и датчики сбоить но как по мне 49C для винтов это многовато, если они конечно не "шпарят на полную" по задумке....
Прошелся по паре своих серверов, показатель не выше 35, при этом есть Seagate, WD, Hitachi . Проверьте (если имеются) датчики температуры CPU / MB (для линукса можно поставить lmsensors) возможно имеет место общий перегрев вашего сервера.
Может быть я конечно параноик, но у себя меняю винты когда Reallocated_Sector_Ct или не дай бог Current_Pending_Sector >1 (или имеет рост), так что по моему личному мнению вам надо срочно менять винты, ибо уже 62 сектора на первом и 4 на втором были ремаплены, стало быть не могли быть прочитаны\записаны.....

Отдельно замечу, что на смарт теоретически может влиять и качество кабеля через который подключен диск.... а так же качество разъема на матери куда он включен, бывает всякое, но при появлении аналогичных данных стоит как минимум тестировать винты, а как максимум менять если у вас рейд и это зеркало.

P.S: делайте smartctl -a в следующий раз, ибо разные винты могут по разному SMART показывать, хотелось бы понимать модель, объем...