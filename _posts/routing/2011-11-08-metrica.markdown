---
layout: post
title:  "metrica"
date:   2011-11-08 06:20:09 +0400
categories: routing
tags: routing
---

# metrica
Чем меньше метрика, тем маршрут лучше

В большинстве реализации RIP используется простейшая метрика - 
количество хопов, то есть количество промежуточных маршрутизаторов, которые нужно преодолеть пакету до сети назначения.


Метрика это интегральная характеристика маршрута, учитывающая множество характеристик - например, 
полосу пропускания канала связи, стоимость, дистанцию и т.д.. А демоны динамической маршрутизации считают 
метрики в зависимости от протокола, и в конечном итоге, на выходе получается список маршрутов (с метриками),
 который скармливается в ядро, и ядро используя его проводит маршрутизацию по стандартным правилам.
[http://www.linux.org.ru/forum/admin/4810239](http://www.linux.org.ru/forum/admin/4810239)

O E2     81.16.117.8/30 [110/1] via 81.20.192.49, 3d06h, Port-channel3.13
O E1     81.20.192.0/20 [110/301] via 81.20.192.49, 3d06h, Port-channel3.13


У одного метрика 1, а у другого 301
110 - это идентификатор ospf

Метрики у разных протоколов маршрутизации считаются по разному.






Метрики маршрутов

Если адресат достижим более чем одним путем, маршрутизатор должен сделать выбор,
 этот выбор осуществляется на основании оценки маршрутов-кандидатов. 
Обычно каждому сегменту, составляющему маршрут, присваивается некоторая величина - оценка этого сегмента.
 Каждый протокол маршрутизации использует свою систему оценки маршрутов. 
Оценка сегмента маршрута называется метрикой.
 Здесь следует обратить внимание на то, что при выборе маршрута всем сегментам пути должны быть даны сопоставимые значения метрики.
 Недопустимо, чтобы одни сегменты оценивались числом шагов, а другие - по величине задержки в миллисекундах.
 В пределах автономной системы это обычно не создает проблем, ведь это зона ответственности одного администратора. 
Но в региональных сетях, где работает много администраторов, проблема выбора метрики может стать реальной трудностью. 
Именно по этой причине в таких сетях часто используется вектор расстояния, исключающий субъективность оценок метрики.

Помимо классической схемы маршрутизации по адресу места назначения, часто используется вариант выбора маршрута отправителем 
(данный вариант получил дальнейшее развитие при введении стандарта IPv6).
 В этом случае IP-пакет содержит соответствующий код опции и список промежуточных адресов узлов, 
которые он должен посетить по пути к месту назначения.

[http://book.itep.ru/4/44/rut_4411.htm](http://book.itep.ru/4/44/rut_4411.htm)







Определение маршрута
Для того чтобы определить, какой из маршрутов является лучшим для передачи пакета, протоколы маршрутизации используют метрики.
 Метрика представляет собой числовую характеристику маршрута,
 такую, например, как полоса пропускания канала, и используется алгоритмами маршрутизации 
для определения оптимального пути к получателю данных. 
Для упрощения процесса определения маршрута алгоритмы маршрутизации создают и регулярно обновляют таблицы маршрутизации,
 в которых содержится информация о маршрутах.
 Информация о маршрутах меняется в зависимости от используемого алгоритма маршрутизации. 


[http://www.netconfig.ru/server/router/](http://www.netconfig.ru/server/router/)






Метрики маршрутов
В таблицах маршрутизации содержится информация, используемая коммутирующим программным обеспечением для выбора наилучшего маршрута.
 Для определения оптимального маршрута алгоритмы маршрутизации используют множество различных метрик. 
В сложных алгоритмах маршрутизации выбор маршрута осуществляется по нескольким метрикам, образующим составную (гибридную) метрику.

Для определения наилучшего маршрута используются следующие метрики:

    длина маршрута;
    надежность;
    задержка;
    полоса пропускания;
    нагрузка;
    затраты на передачу.

Длина маршрута представляет собой наиболее часто используемую метрику маршрутизации. 
Некоторые протоколы маршрутизации позволяют сетевому администратору произвольным образом назначать каждому каналу значение,
 отражающее затраты на передачу. В этом случае длина маршрута представляет собой сумму затрат на всех пройденных участках.
 Другие протоколы маршрутизации вычисляют количество пройденных узлов — метрику, которая определяет, 
какое количество переходов между сетевыми устройствами, такими как маршрутизаторы, должен пройти пакет на пути от источника к получателю.

В контексте маршрутизации надежность алгоритма маршрутизации определяется надежностью канала связи 
(обычно выражаемой отношением количества переданных битов к количеству ошибок).

Задержка при маршрутизации представляет собой время, требуемое для доставки пакета по сети от источника к получателю.
 Величина задержки зависит от многих факторов, таких как полоса пропускания промежуточных линий связи, 
длина очереди на порту каждого маршрутизатора, переполнения на промежуточных линиях связи, а также физическое расстояние,
 которое необходимо пройти.

Полоса пропускания характеризует пропускную способность канала. 
При прочих равных условиях 10-мегабитный канал Ethernet предпочтительнее, чем выделенная линия с полосой пропускания 64 Кбит/с. 
Хотя полоса пропускания характеризует максимальную пропускную способность канала, маршруты, 
проходящие по каналам с большей полосой пропускания, не всегда оказываются лучше маршрутов, проходящих по более медленным линиям. 
Например, если быстрый канал загружен больше, то для передачи по нему пакета получателю может потребоваться больше времени,
 чем при использовании более медленного, но менее загруженного канала.

Нагрузка характеризует степень занятости сетевого ресурса, например маршрутизатора. 
Используются различные способы определения нагрузки, в том числе по интенсивности использования процессора и по количеству обрабатываемых
в секунду пакетов. Однако сам по себе мониторинг этих параметров может поглощать значительные ресурсы.

Еще одной важной метрикой являются затраты на передачу данных, особенно потому, 
что некоторые компании заботятся не столько о производительности, сколько об эксплуатационных расходах. 
Во многих случаях эти компании предпочитают передавать данные по своим собственным каналам, 
хотя в них задержка больше, а не по общедоступным каналам, поскольку использование последних вызывает дополнительные расходы.


Протоколы маршрутизации
Данные маршрутизируемых протоколов передаются по объединенной сети с использованием протоколов маршрутизации.
 В этом контексте маршрутизируемые протоколы также называют сетевыми протоколами.

Термины маршрутизируемый протокол (routed protocol) и протокол маршрутизации (routing protocol) 
часто ошибочно воспринимают как равноценные и взаимозаменяемые.

Маршрутизируемыми являются протоколы, данные которых передаются по маршрутам объединенной сети, такие, например, 
как Internet Protocol (IP), DECnet, AppleTalk, Novell NetWare, OSI, Banyan VINES и Xerox Network System (XNS). 
Протоколы маршрутизации, напротив, представляет собой протоколы, реализующие алгоритмы маршрутизации. 
Иными словами, протоколы маршрутизации используются промежуточными системами для составления таблиц, 
по которым определяются маршруты маршрутизируемых протоколов.

Протоколами маршрутизации являются такие протоколы, как Interior Gateway Routing Protocol (IGRP), 
Enhanced Interior Gateway Routing Protocol (Enhanced IGRP), Open Shortest Path First (OSPF), 
Exterior Gateway Protocol (EGP), Border Gateway Protocol (BGP), Intermediate System-to-Intermediate System (IS-IS) и 
Routing Information Protocol (RIP). 

[http://www.netconfig.ru/server/router/](http://www.netconfig.ru/server/router/)



Маршруты в CISCO
[http://xgu.ru/wiki/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%B2_Cisco](http://xgu.ru/wiki/%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%B2_Cisco)
